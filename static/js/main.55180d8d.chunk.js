(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},129:function(e,t,a){e.exports=a(243)},134:function(e,t,a){},136:function(e,t,a){},141:function(e,t,a){},143:function(e,t,a){},243:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(48),i=a.n(o),l=(a(134),a(23)),r=a(24),c=a(27),u=a(25),h=a(26),m=a(127),d=a.n(m);a(136),s.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(139),s.Component;var p=a(16),f=a(128),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSelect=a.handleSelect.bind(Object(p.a)(Object(p.a)(a))),a.isSelected=!1,a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"handleSelect",value:function(){this.isSelected?this.isSelected=!1:this.isSelected=!0,this.forceUpdate(),this.props.selectStockMethod(this.props.name,this.isSelected)}},{key:"returnTotalValue",value:function(){}},{key:"getIsSelected",value:function(e){return e}},{key:"render",value:function(){return n.a.createElement("div",{className:"stock "+(this.isSelected?"selected":"")},n.a.createElement("span",{className:"stockInfo"},this.props.name),n.a.createElement("span",{className:"stockInfo"},this.props.quantity),n.a.createElement("span",{className:"stockInfo"},this.props.unitValue),n.a.createElement("span",{className:"stockInfo"},this.props.totalValue),n.a.createElement("button",{onClick:this.handleSelect,className:"btn btn-light btn-sm"},n.a.createElement(f.a,null)))}}]),t}(s.Component),S=(a(141),function(e){return n.a.createElement("div",{className:"modal-wrapper",style:{transform:e.show?"translateY(-20vh)":"translateY(-80vh)",visibility:e.show?"visible":"hidden",opacity:e.show?"1":"0"}},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h3",null,"Add Stock"),n.a.createElement("span",{className:"close-modal-btn",onClick:e.close},"\xd7")),n.a.createElement("div",{className:"modal-body"},e.children))}),v=(a(143),function(e){return n.a.createElement("div",{className:"modal-wrapper",style:{transform:e.show?"translateY(-10vh)":"translateY(-80vh)",visibility:e.show?"visible":"hidden",opacity:e.show?"1":"0"}},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h3",null,e.name," historic stock data"),n.a.createElement("span",{className:"close-modal-btn",onClick:e.close},"\xd7")),n.a.createElement("div",{className:"modal-body"},e.children))}),b=a(43),y=a(15),g=new y.TimeSeries({name:"traffic",columns:["time","value"],points:[[1400425947e3,52],[1400425948e3,18],[1400425949e3,26],[140042595e4,93]]}),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).openModalHandler=function(){a.setState({isShowing:!0})},a.closeModalHandler=function(){a.setState({isShowing:!1})},a.openModalChartHandler=function(){if(a.state.selectedStocks.length>0){var e=a.state.stocks[0].fullData.points.length-1,t=a.state.stocks[0].fullData.points[e][0];a.setState({endDate:t});var s=a.state.stocks[0].fullData.points[0][0];a.setState({startDate:s}),a.setState({isShowingChart:!0})}else alert("No stocks selected")},a.closeModalChartHandler=function(){a.setState({isShowingChart:!1})},a.createSelectedXAxises=function(){var e=[];for(var t in a.state.selectedStocks)for(var s in a.state.stocks)if(a.state.stocks[s].name===a.state.selectedStocks[t].name){var o=a.state.selectedStocks[t].name,i=a.state.selectedStocks[t].color,l=Object(b.styler)([{key:o,color:i,width:2}]);g=new y.TimeSeries(a.state.stocks[s].fullData),e.push(n.a.createElement(b.LineChart,{axis:"axis1",columns:[o],style:l,series:g}))}return e},a.createSelectedYAxises=function(){var e=.1,t=2e3;for(var s in a.state.stocks)for(var o in a.state.selectedStocks)if(a.state.stocks[s].name===a.state.selectedStocks[o].name)for(var i in a.state.stocks[s].fullData.points){var l=parseFloat(a.state.stocks[s].fullData.points[i][1]);l>e&&(e=l),l<t&&(t=l)}return n.a.createElement(b.YAxis,{id:"axis1",label:"",min:t,max:e,width:"60",type:"linear",format:"$,.2f"})},a.state={stocks:[],selectedStocks:[],hits:[],currency:"USD",isShowing:!1,isShowingChart:!1,inputStockSymbol:"",inputShareAmount:"",chartWidth:700,startDate:15384276e5,endDate:15338484e5},a.clearEmpties=a.clearEmpties.bind(Object(p.a)(Object(p.a)(a))),a.updateChartDimensions=a.updateChartDimensions.bind(Object(p.a)(Object(p.a)(a))),a.getRandomColor=a.getRandomColor.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"clearEmpties",value:function(e){var t=[];return Object.keys(e).forEach(function(a){e[a]&&(t[a]=e[a])}),t}},{key:"handleDelete",value:function(){1==window.confirm("Are you sure you want to delete the portfolio?")&&this.props.deleteMethod(this.props.name)}},{key:"deleteSelectedStocks",value:function(){var e=JSON.parse(JSON.stringify(this.state.stocks.slice())),t=this.state.selectedStocks.slice();for(var a in t)for(var s in e)e[s].name===t[a].name&&e.splice(s,1);t=[{}],e=this.clearEmpties(e),this.setState({stocks:e}),this.setState({selectedStocks:t})}},{key:"selectStockMethod",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.selectedStocks.slice()));if(!1===t)for(var s in a)a[s].name===e&&a.splice(s,1);else if(!(e in a)){var n={name:e,color:this.getRandomColor()};a.push(n)}a=this.clearEmpties(a),this.setState({selectedStocks:a})}},{key:"handleStockStartDateChange",value:function(e){var t=new Date(this.state.stocks[0].fullData.points[0][0]),a=e.target.value.split("-"),s=new Date(a[0],a[1]-1,a[2]),n=new Date,o=s.getTime();s>=n||s<t?s>=n?alert("Starting date must be prior to current date"):alert("Stock data prior to "+t.toString()+" is not available"):this.setState({startDate:o})}},{key:"handleStockEndDateChange",value:function(e){var t=this.state.startDate,a=e.target.value.split("-"),s=new Date(a[0],a[1]-1,a[2]),n=new Date,o=s.getTime();s>=n||s<t?s>=n?alert("Ending date must be prior to current date"):alert("Chart time window too short"):this.setState({endDate:o})}},{key:"handleStockSymbolChange",value:function(e){this.setState({inputStockSymbol:e.target.value})}},{key:"handleShareAmountChange",value:function(e){this.setState({inputShareAmount:e.target.value})}},{key:"handleChangeCurrencyToEUR",value:function(){if("EUR"!==this.state.currency){this.setState({currency:"EUR"});var e=this.state.stocks.slice();for(var t in e)e[t].unitValue=parseFloat((.88*e[t].unitValue).toFixed(3)),e[t].totalValue=parseFloat((.88*e[t].totalValue).toFixed(3));this.setState({stocks:e})}}},{key:"handleChangeCurrencyToUSD",value:function(){if("USD"!==this.state.currency){this.setState({currency:"USD"});var e=this.state.stocks.slice();for(var t in e)e[t].unitValue=parseFloat((1.14*e[t].unitValue).toFixed(3)),e[t].totalValue=parseFloat((1.14*e[t].totalValue).toFixed(3));this.setState({stocks:e})}}},{key:"handleUpdateDateStart",value:function(e){this.setState({startDate:e.target.value})}},{key:"handleUpdateDateEnd",value:function(e){this.setState({endDate:e.target.value})}},{key:"isTickerValid",value:function(e){return e.trim(),!!(/^[a-zA-Z]+$/.test(e)&&e.length<=4)}},{key:"handleAddStock",value:function(){var e=this;if(this.state.stocks.length<50){this.getTotalValue();var t=this.state.inputStockSymbol,a=this.state.inputShareAmount;if(!(this.isTickerValid(t)&&a>0))return;for(var s in this.state.stocks)if(this.state.stocks[s].name===t){var n=this.state.stocks.slice();return n[s].quantity+=a,n[s].totalValue+=(a*n[s].unitValue).toFixed(3),void this.setState({stocks:n})}fetch("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+t+"&apikey=UE8SOMJ4OW13XXPG").then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(t){var s=t["Meta Data"]["2. Symbol"],n=parseFloat(t["Time Series (Daily)"][Object.keys(t["Time Series (Daily)"])[0]]["1. open"]),o={name:s,columns:["time",s],points:[]};for(var i in Object.keys(t["Time Series (Daily)"])){var l=Object.keys(t["Time Series (Daily)"])[i].split("-"),r=new Date(l[0],l[1]-1,l[2]).getTime(),c=parseFloat(t["Time Series (Daily)"][Object.keys(t["Time Series (Daily)"])[i]]["1. open"]).toFixed(3);o.points.push(new Array),o.points[i][0]=r,o.points[i][1]=c}o.points.reverse();var u=e.state.stocks.slice(),h={name:s,unitValue:n,quantity:a,totalValue:parseFloat((n*a).toFixed(3)),fullData:o};u.push(h),e.setState({stocks:u})}).catch(function(e){console.log(e),alert("Error: Stock symbol is most likely not valid")})}else alert("Maximum number of stock symbols (50) reached")}},{key:"getTotalValue",value:function(){var e=0;for(var t in this.state.stocks)this.state.stocks[t].totalValue&&(e+=this.state.stocks[t].totalValue);return parseFloat(e).toFixed(3)+this.getCurrencySymbol()}},{key:"updateChartDimensions",value:function(){window.innerWidth>700?this.setState({chartWidth:650}):this.setState({chartWidth:window.innerWidth-50})}},{key:"componentDidMount",value:function(){this.updateChartDimensions(),window.addEventListener("resize",this.updateChartDimensions)}},{key:"componentWillMount",value:function(){localStorage.getItem(this.props.name+"Stocks")&&this.setState({stocks:JSON.parse(localStorage.getItem(this.props.name+"Stocks"))})}},{key:"componentWillUpdate",value:function(e,t){localStorage.setItem(this.props.name+"Stocks",JSON.stringify(t.stocks))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"createLegends",value:function(){var e=[];for(var t in this.state.selectedStocks){var a=this.state.selectedStocks[t].name,s=this.state.selectedStocks[t].color;[].push({key:a,label:a});var o={backgroundcolor:s,width:"20px",marginLeft:"3px",marginRight:"3px",marginTop:"10px",height:"3px",backgroundColor:s,float:"left"};e.push(n.a.createElement("span",{className:"legend"},n.a.createElement("hr",{style:o}),a))}return e}},{key:"getCurrencySymbol",value:function(){return"EUR"===this.state.currency?" \u20ac":" $"}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"portfolio shadow-sm"},n.a.createElement(v,{className:"modal",name:this.props.name,show:this.state.isShowingChart,close:this.closeModalChartHandler},n.a.createElement("div",null,n.a.createElement(b.ChartContainer,{timeAxisAngledLabels:!0,timeAxisHeight:65,timeRange:new y.TimeRange(this.state.startDate,this.state.endDate),width:this.state.isShowingChart?this.state.chartWidth:0},n.a.createElement(b.ChartRow,{height:"250"},this.createSelectedYAxises(),n.a.createElement(b.Charts,null,this.createSelectedXAxises()))),n.a.createElement("div",{className:"legend-container"},this.createLegends())),"Start Date:"," ",n.a.createElement("input",{className:"input-date",type:"date",onChange:function(t){return e.handleStockStartDateChange(t)}}),"End Date:"," ",n.a.createElement("input",{className:"input-date",type:"date",onChange:function(t){return e.handleStockEndDateChange(t)}})),n.a.createElement("div",{className:"portfolio-header-grid"},this.props.name,n.a.createElement("button",{onClick:this.handleChangeCurrencyToEUR.bind(this),className:"btn btn-light btn-sm"},"Show in \u20ac"),n.a.createElement("button",{onClick:this.handleChangeCurrencyToUSD.bind(this),className:"btn btn-light btn-sm"},"Show in $"),n.a.createElement("button",{type:"button",class:"close deleteButton","aria-label":"Close",onClick:this.handleDelete.bind(this)},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"stocks-container-full"},n.a.createElement("div",{className:"stocks-header"},n.a.createElement("span",{className:"stocks-info"},"Stock"),n.a.createElement("span",{className:"stocks-info"},"Quantity"),n.a.createElement("span",{className:"stocks-info"},"Unit value"),n.a.createElement("span",{className:"stocks-info"},"Total value"),n.a.createElement("span",{className:"stocks-info"},"Select")),n.a.createElement("div",{className:"stocks-container"},this.state.stocks.map(function(t){return n.a.createElement(k,{selectStockMethod:e.selectStockMethod.bind(e),name:t.name,unitValue:t.unitValue+e.getCurrencySymbol(),quantity:t.quantity,totalValue:t.totalValue+e.getCurrencySymbol()})}))),n.a.createElement("div",{className:"portfolio-total-value"},"Total value of Portfolio: ",this.getTotalValue()),n.a.createElement("div",{className:"portfolio-footer-buttons"},n.a.createElement(S,{className:"modal",show:this.state.isShowing,close:this.closeModalHandler},n.a.createElement("div",null,n.a.createElement("span",{className:"add-stock-input"},"Stock symbol:"," ",n.a.createElement("input",{value:this.state.inputStockSymbol,onChange:function(t){return e.handleStockSymbolChange(t)},type:"text"}))),n.a.createElement("div",null,n.a.createElement("span",{className:"add-stock-input"},"Number of shares:"," ",n.a.createElement("input",{value:this.state.inputShareAmount,onChange:function(t){return e.handleShareAmountChange(t)},type:"number",min:"0",step:"1"}))),n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-primary",onClick:this.handleAddStock.bind(this)}," ","Add stock"))),n.a.createElement("button",{className:"btn btn-primary btn-sm button-addstock",onClick:this.openModalHandler},"Add Stock"),n.a.createElement("button",{className:"btn btn-info btn-sm button-graph",onClick:this.openModalChartHandler.bind(this)},"Perf graph of selected"),n.a.createElement("button",{className:"btn btn-danger btn-sm button-removestock",onClick:this.deleteSelectedStocks.bind(this)},"Remove selected")))}}]),t}(s.Component),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={portfolios:[],inputValue:""},a.isEmpty=a.isEmpty.bind(Object(p.a)(Object(p.a)(a))),a.clearEmpties=a.clearEmpties.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"clearEmpties",value:function(e){var t=[];return Object.keys(e).forEach(function(a){e[a]&&(t[a]=e[a])}),t}},{key:"deleteMethod",value:function(e){var t=this.state.portfolios.slice();for(var a in t)t[a].name==e&&(t.splice(a,1),localStorage.removeItem(e+"Stocks"));t=this.clearEmpties(t),this.setState({portfolios:t})}},{key:"handleAddPortfolio",value:function(){if(this.state.portfolios.length<10){var e=prompt("Please enter portfolio name");if(null!=e){for(var t in this.state.portfolios)if(this.state.portfolios[t].name===e)return void alert("Portfolio "+e+" already exists. Please provide a unique portfolio name");var a=this.state.portfolios.slice(),s={name:e};a.push(s),this.setState({portfolios:a}),this.state.inputValue=""}}else alert("Maximum amount of portfolios (10) has been reached")}},{key:"componentWillMount",value:function(){document.body.style="background: #f2f2f2;",localStorage.getItem("portfolios")&&this.setState({portfolios:JSON.parse(localStorage.getItem("portfolios"))})}},{key:"componentWillUpdate",value:function(e,t){this.isEmpty(t.portfolios)?localStorage.clear():localStorage.setItem("portfolios",JSON.stringify(t.portfolios))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"portfolios-wrapper"},n.a.createElement("div",{class:"page-header"},n.a.createElement("h1",null,"Stock Portfolio Management System")),n.a.createElement("button",{className:"button-add-portfolio btn btn-primary",onClick:this.handleAddPortfolio.bind(this)},"Add Portfolio"),this.state.portfolios.length?this.state.portfolios.map(function(t){return n.a.createElement(E,{name:t.name,deleteMethod:e.deleteMethod.bind(e)})}):console.log("no portfolios found"))}}]),t}(s.Component);i.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,2,1]]]);
//# sourceMappingURL=main.55180d8d.chunk.js.map